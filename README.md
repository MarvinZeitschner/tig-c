A small rewrite of some git internals in c for the sake of writing c.
